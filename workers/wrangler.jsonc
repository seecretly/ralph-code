{
  "name": "ralph-coordinator",
  "main": "./ralph-coordinator.ts",
  "compatibility_date": "2025-01-08",
  "compatibility_flags": ["nodejs_compat"],

  // Cron trigger for polling Vibe Kanban
  "triggers": {
    "crons": ["*/1 * * * *"]  // Every 1 minute
  },

  // Durable Objects
  "durable_objects": {
    "bindings": [
      {
        "name": "RALPH_STATE",
        "class_name": "RalphStateDO",
        "script_name": "ralph-coordinator"
      }
    ]
  },

  // Environment variables (set via wrangler secret)
  "vars": {
    "VIBE_PROJECT_NAME": "rocket",
    "GITHUB_REPO_OWNER": "naturaumana-ai",
    "GITHUB_REPO_NAME": "rocket",
    "EXECUTION_SERVER_URL": "http://localhost:3000"
  },

  // Secrets (set via wrangler secret put)
  // - VIBE_KANBAN_API_KEY
  // - VIBE_KANBAN_MCP_URL
  // - GITHUB_TOKEN
  // - EXECUTION_SERVER_TOKEN
  // - ANTHROPIC_API_KEY (optional)

  // Development environment
  "env": {
    "dev": {
      "vars": {
        "EXECUTION_SERVER_URL": "http://localhost:3000"
      }
    },
    "production": {
      "vars": {
        "EXECUTION_SERVER_URL": "https://ralph-exec.yourdomain.com"
      }
    }
  }
}
